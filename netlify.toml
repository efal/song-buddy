[build]
  # Standard Build-Command für React Apps (Voraussetzung: package.json mit Build-Script)
  command = "npm run build"
  # Das Verzeichnis, das veröffentlicht werden soll (meist 'dist' oder 'build')
  publish = "dist"

# Redirect Regel für Single Page Applications (SPA)
# Leitet alle Anfragen an index.html weiter, damit React das Routing übernehmen kann
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# Header Einstellungen für PWA und Caching
[[headers]]
  # Der Service Worker darf NICHT im Browser-Cache gespeichert werden,
  # damit Updates sofort erkannt werden.
  for = "/service-worker.js"
  [headers.values]
    Cache-Control = "max-age=0, no-cache, no-store, must-revalidate"
    Content-Type = "application/javascript"

[[headers]]
  # Manifest Header für korrekte PWA-Erkennung
  for = "/manifest.json"
  [headers.values]
    Content-Type = "application/manifest+json"
    Cache-Control = "public, max-age=0"

[[headers]]
  # Sicherheits-Header
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-XSS-Protection = "1; mode=block"
    Referrer-Policy = "strict-origin-when-cross-origin"
